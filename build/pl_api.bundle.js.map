{"version":3,"sources":["webpack://PL_API/webpack/bootstrap","webpack://PL_API/./src/auth.js","webpack://PL_API/./src/main.js"],"names":["Auth","recaptcha_token","sso_url","events","start","callback","msg_error","connect","disconnect","polls","finish","error","register_success","register_fail","primary_url","auth_id","auth_socials","auth_back","skip_polls","auth_accounts","FindAuthToken","response","token","localStorage","getItem","atob","SetAuthToken","setItem","btoa","FindSkipPolls","skip","SetSkipPolls","FindAuthBack","back","SetAuthBack","FindSocialData","data","JSON","parse","e","SetSocialData","social","dataToSave","stringify","UnsetAuthToken","removeItem","parseJwt","base64Url","split","base64","decodeURIComponent","map","c","charCodeAt","toString","slice","join","DoPOST","url","eventsOnGo","fetch","method","mode","headers","Headers","cache","body","then","json","err","SendMsg","EventTrigger","execEventOnGo","DoGET","query","Object","keys","k","encodeURIComponent","msg","console","log","eventName","eventOnGoTree","params","execEvent","paramsSend","callbackTmp","getValidUrl","newUrl","window","trim","replace","test","urlParams","URLSearchParams","location","search","back_uri","get","PlConnectApiInstance","account","name","accounts","AccountsFind","accountsToSave","length","key","index","event","callbackEvent","auth","AccountSave","email","lastname","RedirectToBackURL","AuthSocialLogin","urlBack","backUrl","pattern","href","s","document","createElement","type","src","onload","setTimeout","grecaptcha","ready","execute","action","head","getElementsByTagName","appendChild","socials_data","verifyTokens","dataSend","CheckLogin","oauth_token","oauth_verifier","opt","accessToken","signedRequest","idToken","social_network","self","async","defer","onerror","fbAsyncInit","FB","init","appId","autoLogAppEvents","xfbml","version","handleFb","getLoginStatus","status","authResponse","login","scope","operation","gapi","load","auth2","client_id","signIn","authUser","currentUser","userId","getId","getAuthResponse","access_token","id_token","user_id","user","password","keep_session","password_confirm","sub","require","module","exports"],"mappings":"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","file":"pl_api.bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/main.js\");\n","export default class Auth {\r\n\r\n    constructor() {\r\n\r\n        this.recaptcha_token = false;\r\n\r\n        this.sso_url = \"https://sso.prensalibre.com\";\r\n\r\n        //Default events\r\n        this.events = {\r\n            start: {\r\n                callback: () => {},\r\n                msg_error: \"Event -> start callback is not function\"\r\n            },\r\n            connect: {\r\n                callback: () => {},\r\n                msg_error: \"Event -> connect callback is not function\"\r\n            },\r\n            disconnect: {\r\n                callback: () => {},\r\n                msg_error: \"Event -> disconnect callback is not function\"\r\n            },\r\n            polls: {\r\n                callback: () => {},\r\n                msg_error: \"Event -> polls callback is not function\"\r\n            },\r\n            finish: {\r\n                callback: () => {},\r\n                msg_error: \"Event -> finish callback is not function\"\r\n            },\r\n            error: {\r\n                callback: () => {},\r\n                msg_error: \"Event -> error callback is not function\"\r\n            },\r\n            register_success: {\r\n                callback: () => {},\r\n                msg_error: \"Event -> finish callback is not function\"\r\n            },\r\n            register_fail: {\r\n                callback: () => {},\r\n                msg_error: \"Event -> finish callback is not function\"\r\n            }\r\n        };\r\n        this.primary_url = \"https://foservices.prensalibre.com\";\r\n        this.auth_id = \"0f07e8e38a7b56f90912b3d0d874f7e7\";\r\n        this.auth_socials = \"5f27a8efzc452v7b56f90912bcdpoeRe5\";\r\n        this.auth_back = \"932dfaf278s5f8t5h4sdf6348fzbcml4f\";\r\n        this.skip_polls = \"Z325ffa277s0f3t5N4sdO664pfznyml45\";\r\n        this.auth_accounts = \"68s5f47w8s5f4asc25sdfa3sdf87cxgpeb\";\r\n\r\n        this.FindAuthToken = () => {\r\n            let response = false;\r\n            const token = localStorage.getItem(this.auth_id);\r\n            if (token !== null) {\r\n                response = atob(token);\r\n            }\r\n            return response;\r\n        };\r\n\r\n        this.SetAuthToken = (token) => {\r\n            localStorage.setItem(this.auth_id, btoa(token));\r\n        };\r\n\r\n        this.FindSkipPolls = () => {\r\n            let response = false;\r\n            const skip = localStorage.getItem(this.skip_polls);\r\n            if (skip !== null) {\r\n                response = skip;\r\n            }\r\n            return response;\r\n        };\r\n\r\n        this.SetSkipPolls = (skip) => {\r\n            localStorage.setItem(this.skip_polls, skip);\r\n        };\r\n\r\n        this.FindAuthBack = () => {\r\n            let response = false;\r\n            const back = localStorage.getItem(this.auth_back);\r\n            if (back !== null) {\r\n                response = back;\r\n            }\r\n            return response;\r\n        };\r\n\r\n        this.SetAuthBack = (back) => {\r\n            localStorage.setItem(this.auth_back, back);\r\n        };\r\n\r\n        this.FindSocialData = () => {\r\n            let response = false;\r\n            const data = localStorage.getItem(this.auth_socials);\r\n            if (data !== null) {\r\n                try {\r\n                    response = JSON.parse(data);\r\n                }\r\n                catch(e){\r\n                    response = {};\r\n                }\r\n\r\n            }\r\n            return response;\r\n        };\r\n\r\n        this.SetSocialData = (data, social) => {\r\n            let dataToSave = \"\";\r\n            data.social = social;\r\n            try {\r\n                dataToSave = JSON.stringify(data);\r\n            }\r\n            catch(e){\r\n                dataToSave = \"\";\r\n            }\r\n            localStorage.setItem(this.auth_socials, dataToSave);\r\n        };\r\n\r\n        this.UnsetAuthToken = () => {\r\n            localStorage.removeItem(this.auth_id);\r\n            return !this.FindAuthToken();\r\n        };\r\n\r\n        this.parseJwt = (token) => {\r\n            if (token) {\r\n                var base64Url = token.split('.')[1];\r\n                var base64 = decodeURIComponent(atob(base64Url).split('').map((c) => {\r\n                    return '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2);\r\n                }).join(''));\r\n\r\n                return JSON.parse(base64);\r\n            }\r\n            else{\r\n                return false;\r\n            }\r\n        };\r\n\r\n        this.DoPOST = (url, data, callback, eventsOnGo) => {\r\n\r\n            // autoset token\r\n            if(typeof data[\"token\"] === \"undefined\") {\r\n                data[\"token\"] = this.FindAuthToken();\r\n            }\r\n\r\n            if(!eventsOnGo) eventsOnGo = {};\r\n\r\n            fetch(url, {\r\n                method: 'POST',\r\n                mode: 'cors',\r\n                headers: new Headers(\r\n                  {\r\n                      'Content-Type': 'application/json',\r\n                      'Access-Control-Allow-Origin':'*'\r\n                  }),\r\n                cache: 'no-cache',\r\n                body: JSON.stringify(data)\r\n            })\r\n              .then((response) => {\r\n                  return response.json();\r\n              })\r\n              .then((response) => {\r\n                  callback(response);\r\n              })\r\n              .catch((err) => {\r\n                  this.SendMsg(err);\r\n                  this.EventTrigger(\"error\");\r\n                  this.execEventOnGo(\"error\", eventsOnGo);\r\n              });\r\n        };\r\n\r\n        this.DoGET = (url, data, callback, eventsOnGo) => {\r\n\r\n            // If is an get request, DONT SEND TOKEN\r\n\r\n            if(!eventsOnGo) eventsOnGo = {};\r\n\r\n            let query = Object.keys(data).map(k => encodeURIComponent(k) + '=' + encodeURIComponent(data[k])).join('&');\r\n\r\n            fetch(url+\"?\"+query, {\r\n                method: 'GET',\r\n                mode: 'cors',\r\n                headers: new Headers(\r\n                  {\r\n                      'Content-Type': 'application/json',\r\n                      'Access-Control-Allow-Origin':'*'\r\n                  }),\r\n                cache: 'no-cache',\r\n            })\r\n              .then((response) => {\r\n                  return response.json();\r\n              })\r\n              .then((response) => {\r\n                  callback(response);\r\n              })\r\n              .catch((err) => {\r\n                  this.SendMsg(err);\r\n                  this.EventTrigger(\"error\");\r\n                  this.execEventOnGo(\"error\", eventsOnGo);\r\n              });\r\n        };\r\n\r\n        this.SendMsg = (msg) => {\r\n            console.log(`PL_API Says: ${msg}`);\r\n        };\r\n\r\n        this.execEventOnGo = (eventName, eventOnGoTree, params) => {\r\n            if(!params) params = false;\r\n            if(typeof eventOnGoTree[eventName] !== \"undefined\") {\r\n                const token = this.FindAuthToken();\r\n                if(!params) params = this.parseJwt(token);\r\n\r\n                eventOnGoTree[eventName](params);\r\n            }\r\n        };\r\n\r\n        this.execEvent = (eventName, paramsSend) => {\r\n            // If the event exists\r\n            if (typeof this.events[eventName] !== \"undefined\") {\r\n\r\n                // If the callback exists\r\n                if (typeof this.events[eventName].callback === \"function\") {\r\n                    // Call event\r\n                    const callbackTmp = this.events[eventName].callback;\r\n                    callbackTmp(paramsSend);\r\n                }\r\n                else {\r\n                    this.SendMsg(this.events[eventName].msg_error);\r\n                }\r\n            }\r\n            else{\r\n                this.SendMsg(\"The event '\"+eventName+\"' not exists\");\r\n            }\r\n        };\r\n\r\n        this.getValidUrl = (url = '') => {\r\n            let newUrl = window.decodeURIComponent(url);\r\n            newUrl = newUrl\r\n              .trim()\r\n              .replace(/\\s/g, '');\r\n            if (/^(:\\/\\/)/.test(newUrl)) {\r\n                return `http${newUrl}`;\r\n            }\r\n            if (!/^(f|ht)tps?:\\/\\//i.test(newUrl)) {\r\n                return `http://${newUrl}`;\r\n            }\r\n            return newUrl;\r\n        };\r\n\r\n        // Set back url\r\n        const urlParams = new URLSearchParams(window.location.search);\r\n        const back_uri = urlParams.get('back');\r\n        const skip_polls = urlParams.get('skip_polls');\r\n\r\n        if (skip_polls !== null) {\r\n            this.SetSkipPolls(1);\r\n        }\r\n        if (back_uri !== null) {\r\n            this.SetAuthBack(back_uri);\r\n        }\r\n\r\n        // Singleton in window\r\n        if (window.PlConnectApiInstance) {\r\n            return window.PlConnectApiInstance;\r\n        }\r\n        window.PlConnectApiInstance = this;\r\n    }\r\n\r\n    AccountsFind() {\r\n        let response = false;\r\n        const data = localStorage.getItem(this.auth_accounts);\r\n        if (data !== null) {\r\n            try {\r\n                response = JSON.parse(data);\r\n            }\r\n            catch(e){\r\n                response = {};\r\n            }\r\n\r\n        }\r\n        return response;\r\n    };\r\n\r\n    AccountSave(account, name) {\r\n\r\n        const accounts = this.AccountsFind();\r\n\r\n        let accountsToSave = {};\r\n\r\n        if (accounts !== false && Object.keys(accounts).length > 0) {\r\n            Object.keys(accounts).map(function(key, index) {\r\n                accountsToSave[key] = accounts[key];\r\n            });\r\n        }\r\n        accountsToSave[account] = name;\r\n\r\n        // Save all\r\n        let dataToSave = \"\";\r\n        try {\r\n            dataToSave = JSON.stringify(accountsToSave);\r\n        }\r\n        catch(e){\r\n            dataToSave = \"\";\r\n        }\r\n        localStorage.setItem(this.auth_accounts, dataToSave);\r\n    };\r\n\r\n    Event(event, callbackEvent) {\r\n\r\n        if (typeof this.events[event] !== \"undefined\") {\r\n            this.events[event].callback = callbackEvent;\r\n        }\r\n        else{\r\n            console.log(\"Event '\"+event+\"' is not defined\");\r\n        }\r\n    }\r\n\r\n    EventTrigger(event, params) {\r\n        const token = this.FindAuthToken();\r\n        if(!params) params = null;\r\n\r\n        if (params === null) {\r\n            params = this.parseJwt(token);\r\n        }\r\n        this.execEvent(event, params);\r\n    }\r\n\r\n    CheckLogin(eventsOnGo) {\r\n\r\n        if (!eventsOnGo) eventsOnGo = {};\r\n\r\n        // Exec start callback\r\n        this.EventTrigger(\"start\");\r\n        this.execEventOnGo(\"start\", eventsOnGo);\r\n\r\n        // Check token\r\n        const token = this.FindAuthToken();\r\n\r\n        // If token exists\r\n        if (token) {\r\n            this.DoPOST(this.primary_url + '/auth/check', {token: token}, (data) => {\r\n\r\n                if (typeof data.auth !== \"undefined\") {\r\n                    if (data.auth === 1) {\r\n\r\n                        // save account logged\r\n                        this.AccountSave(data.email, data.name+\" \"+data.lastname);\r\n\r\n                        // find skip polls\r\n                        const skip = this.FindSkipPolls();\r\n\r\n                        // Check polls\r\n                        if (typeof data.polls !== \"undefined\" && !skip) {\r\n                            // Fire events\r\n                            this.SendMsg(\"** User has polls **\");\r\n                            this.EventTrigger(\"polls\", data.polls);\r\n                            this.execEventOnGo(\"polls\", eventsOnGo, data.polls);\r\n                        }\r\n                        else{\r\n                            // Redirect to back\r\n                            this.RedirectToBackURL();\r\n                        }\r\n                        // Fire events\r\n                        this.SendMsg(\"** User connected **\");\r\n                        this.EventTrigger(\"connect\");\r\n                        this.execEventOnGo(\"connect\", eventsOnGo);\r\n                    }\r\n                    else {\r\n                        this.EventTrigger(\"disconnect\");\r\n                        this.execEventOnGo(\"disconnect\", eventsOnGo);\r\n                    }\r\n                }\r\n                // Call on_finish_validation\r\n                this.EventTrigger(\"finish\");\r\n                this.execEventOnGo(\"finish\", eventsOnGo);\r\n            });\r\n        }\r\n        else {\r\n            // Call on disconnect\r\n            this.EventTrigger(\"disconnect\");\r\n            this.execEventOnGo(\"disconnect\", eventsOnGo);\r\n\r\n            // Call on_finish_validation\r\n            this.EventTrigger(\"finish\");\r\n            this.execEventOnGo(\"finish\", eventsOnGo);\r\n\r\n            // check auth login if the user is disconnect\r\n            this.AuthSocialLogin();\r\n        }\r\n    };\r\n\r\n    RedirectToBackURL(urlBack) {\r\n        // If the back url is ok, redirect\r\n        if(!urlBack) urlBack = false;\r\n        const backUrl = this.FindAuthBack();\r\n\r\n        var pattern = /^((http|https|ftp):\\/\\/)/;\r\n\r\n        if (backUrl !== \"\" && backUrl !== \"false\" && backUrl !== false && backUrl) {\r\n            // clear authback\r\n            this.SendMsg(\"Redirecting to \\\"\"+backUrl+\"\\\".\");\r\n            this.SetAuthBack(\"\");\r\n\r\n            if(!pattern.test(backUrl)) {\r\n                window.location.href = backUrl;\r\n            }\r\n            else{\r\n                window.location.href = this.getValidUrl(backUrl);\r\n            }\r\n        }\r\n        else {\r\n            //window.location.href = this.getValidUrl(urlBack);\r\n            this.SendMsg(\"URL Back is not config\");\r\n        }\r\n    }\r\n\r\n    EnableRecaptcha() {\r\n        // Create script for google\r\n        var s = document.createElement(\"script\");\r\n        s.type = \"text/javascript\";\r\n        s.src = \"https://www.google.com/recaptcha/api.js?render=6LcL9qMUAAAAAKrMzirXeGXdcBRsnPzf7T4Zlmy1\";\r\n        s.onload = () => {\r\n            setTimeout(()=>{\r\n                grecaptcha.ready(() => {\r\n                    grecaptcha.execute('6LcL9qMUAAAAAKrMzirXeGXdcBRsnPzf7T4Zlmy1', {action: 'homepage'}).then((token) => {\r\n                        this.SendMsg(\"Recaptcha Enabled\");\r\n                        this.recaptcha_token = token;\r\n                    });\r\n                });\r\n            }, 500);\r\n        };\r\n        var head = document.getElementsByTagName(\"head\");\r\n\r\n        // If head is ok, add script\r\n        if (typeof head[0] !== \"undefined\") {\r\n            head[0].appendChild(s);\r\n        }\r\n    }\r\n\r\n    AuthSocialLogin(eventsOnGo) {\r\n\r\n        if(!eventsOnGo) eventsOnGo = {};\r\n\r\n        //let socials_data = localStorage.getItem(this.auth_socials);\r\n        let socials_data = this.FindSocialData();\r\n\r\n        if (socials_data) {\r\n\r\n            const urlParams = new URLSearchParams(window.location.search);\r\n\r\n            const verifyTokens = (dataSend) => {\r\n                this.DoPOST(\"https://foservices.prensalibre.com/auth/social-check\", dataSend, (data) => {\r\n\r\n                    if (typeof data.auth !== \"undefined\" && typeof data.token !== \"undefined\") {\r\n                        if (data.auth === 1) {\r\n                            this.SetAuthToken(data.token);\r\n                            this.SetSocialData({}, socials_data.social); // clean the socialdata\r\n                            this.EventTrigger(\"register_success\");\r\n                            this.execEventOnGo(\"register_success\", eventsOnGo);\r\n                            // Check login again\r\n                            this.CheckLogin(eventsOnGo);\r\n                        }\r\n                        else {\r\n                            this.EventTrigger(\"register_fail\");\r\n                            this.execEventOnGo(\"register_fail\", eventsOnGo);\r\n                        }\r\n                    }\r\n                    this.EventTrigger(\"finish\");\r\n                    this.execEventOnGo(\"finish\", eventsOnGo);\r\n                });\r\n            };\r\n\r\n            // Twitter\r\n            if(socials_data.social === \"twitter\") {\r\n\r\n                const oauth_token = urlParams.get('oauth_token');\r\n                const oauth_verifier = urlParams.get('oauth_verifier');\r\n\r\n                if (oauth_token !== null && oauth_verifier !== null) {\r\n\r\n                    const data = {};\r\n                    data.opt = 'check_token';\r\n                    data.social = socials_data.social;\r\n                    data.oauth_token = oauth_token;\r\n                    data.oauth_verifier = oauth_verifier;\r\n\r\n                    // Send to verify\r\n                    verifyTokens(data);\r\n                }\r\n            }\r\n            // Facebook\r\n            else if(socials_data.social === \"facebook\") {\r\n\r\n                let accessToken = null;\r\n                let signedRequest = null;\r\n\r\n                if (typeof socials_data.accessToken !== \"undefined\" && typeof socials_data.signedRequest !== \"undefined\") {\r\n                    accessToken = socials_data.accessToken;\r\n                    signedRequest = socials_data.signedRequest;\r\n                }\r\n\r\n                if (accessToken !== null && signedRequest !== null) {\r\n\r\n                    const data = {};\r\n                    data.opt = 'check_token';\r\n                    data.social = socials_data.social;\r\n                    data.accessToken = accessToken;\r\n                    data.signedRequest = signedRequest;\r\n\r\n                    // Send to verify\r\n                    verifyTokens(data);\r\n                }\r\n            }\r\n            // Google+\r\n            else if(socials_data.social === \"googleplus\") {\r\n\r\n                let accessToken = null;\r\n\r\n                if (typeof socials_data.accessToken !== \"undefined\" && typeof socials_data.idToken !== \"undefined\") {\r\n                    accessToken = socials_data.accessToken;\r\n                }\r\n\r\n                if (accessToken !== null) {\r\n\r\n                    const data = {};\r\n                    data.opt = 'check_token';\r\n                    data.social = socials_data.social;\r\n                    data.idToken = socials_data.idToken;\r\n                    data.accessToken = accessToken;\r\n\r\n                    // Send to verify\r\n                    verifyTokens(data);\r\n                }\r\n            }\r\n            // Linkedin\r\n            else if(socials_data.social === \"linkedin\") {\r\n\r\n                const oauth_token = urlParams.get('code');\r\n\r\n                if (oauth_token !== null) {\r\n\r\n                    const data = {};\r\n                    data.opt = 'check_token';\r\n                    data.social = socials_data.social;\r\n                    data.oauth_token = oauth_token;\r\n\r\n                    // Send to verify\r\n                    verifyTokens(data);\r\n                }\r\n            }\r\n            else{\r\n                window.location.href = this.sso_url;\r\n            }\r\n        }\r\n    }\r\n\r\n    DoSocialLogin(social_network, action, eventsOnGo) {\r\n\r\n        const self = this;\r\n        if(!action) action = \"start\";\r\n        if(!eventsOnGo) eventsOnGo = {};\r\n\r\n        // Head for async scripts\r\n        var head = document.getElementsByTagName(\"head\");\r\n\r\n        if (social_network === \"facebook\") {\r\n\r\n            // trigger start event\r\n            this.EventTrigger(\"start\");\r\n\r\n            // Load Facebook SDK\r\n            const s = document.createElement(\"script\");\r\n            s.async = \"true\";\r\n            s.defer = \"defer\";\r\n            s.type = \"text/javascript\";\r\n            s.src = \"https://connect.facebook.net/en_US/sdk.js\";\r\n            s.onerror = function() {\r\n                self.EventTrigger(\"error\", \"Tu navegador tiene habilitado el bloqueo de contenido, debes desactivarlo para poder iniciar sesiÃ³n con Facebook\");\r\n                self.execEventOnGo(\"error\", eventsOnGo);\r\n                self.EventTrigger(\"finish\");\r\n            };\r\n            s.onload = () => {\r\n\r\n                // Start fb\r\n                window.fbAsyncInit = function() {\r\n                    FB.init({\r\n                        appId            : '1044051069317309',\r\n                        autoLogAppEvents : true,\r\n                        xfbml            : true,\r\n                        version          : 'v3.3'\r\n                    });\r\n                };\r\n\r\n                const handleFb = (data) => {\r\n                    if (data !== null) {\r\n                        if (typeof data.accessToken !== \"undefined\") {\r\n                            self.SetSocialData(data, social_network);\r\n                            this.AuthSocialLogin();\r\n                        }\r\n                    }\r\n                };\r\n\r\n                FB.getLoginStatus((response) => {\r\n                    if (typeof response.status !== \"undefined\") {\r\n                        if (response.status === \"connected\") {\r\n                            handleFb(response.authResponse);\r\n                        }\r\n                        else {\r\n                            // I need start session and authorize\r\n                            FB.login(function(response) {\r\n                                handleFb(response.authResponse);\r\n                            }, {scope: 'public_profile,email'});\r\n                        }\r\n                    }\r\n                    else {\r\n                        this.SendMsg(\"Error with facebook requests\");\r\n                    }\r\n                    self.EventTrigger(\"finish\");\r\n                });\r\n            };\r\n            // If head is ok, add script\r\n            if (typeof head[0] !== \"undefined\") {\r\n                head[0].appendChild(s);\r\n            }\r\n        }\r\n        else if (social_network === \"twitter\") {\r\n\r\n            // trigger start event\r\n            this.EventTrigger(\"start\");\r\n\r\n            // data for fo services\r\n            const data = {};\r\n            data.opt = action;\r\n            data.social = social_network;\r\n\r\n            const token =  this.DoPOST(\"https://foservices.prensalibre.com/auth/social-check\", data, (data) => {\r\n                if(typeof data.operation !== \"undefined\") {\r\n\r\n                    if (data.operation === \"start\") {\r\n                        // save social data and redirect\r\n                        self.SetSocialData(data, social_network);\r\n                        window.location.href = data.response;\r\n                    }\r\n                }\r\n                self.EventTrigger(\"finish\");\r\n            });\r\n        }\r\n        else if (social_network === \"googleplus\") {\r\n\r\n            // trigger start event\r\n            this.EventTrigger(\"start\");\r\n\r\n            // Load Facebook SDK\r\n            var s = document.createElement(\"script\");\r\n            s.async = \"true\";\r\n            s.defer = \"defer\";\r\n            s.type = \"text/javascript\";\r\n            s.src = \"https://apis.google.com/js/platform.js?onload=init\";\r\n            s.onerror = function() {\r\n                self.EventTrigger(\"error\", \"Tu navegador tiene habilitado el bloqueo de contenido, debes desactivarlo para poder iniciar sesiÃ³n con Google+\");\r\n                self.execEventOnGo(\"error\", eventsOnGo);\r\n                self.EventTrigger(\"finish\");\r\n            };\r\n            s.onload = () => {\r\n\r\n                gapi.load('auth2', function() {\r\n                    // Retrieve the singleton for the GoogleAuth library and set up the client.\r\n                    gapi.auth2.init({\r\n                        client_id: '789855992784-58jngeah5o7rlee4kcujeat020rel4nj.apps.googleusercontent.com',\r\n                        scope: \"profile email\"\r\n                    }).then(function(auth2) {\r\n\r\n                        // Sign the user in, and then retrieve their ID.\r\n                        auth2.signIn().then(function() {\r\n                            try {\r\n                                const authUser = auth2.currentUser.get();\r\n                                const userId = authUser.getId();\r\n                                const accessToken = authUser.getAuthResponse().access_token;\r\n                                const idToken = authUser.getAuthResponse().id_token;\r\n\r\n                                if (userId !== \"\" && accessToken !== \"\" && idToken !== \"\") {\r\n                                    const data = {\r\n                                        user_id: userId,\r\n                                        accessToken: accessToken,\r\n                                        idToken: idToken,\r\n                                    };\r\n                                    self.SetSocialData(data, social_network);\r\n                                    self.AuthSocialLogin();\r\n                                }\r\n                            }\r\n                            catch(e) {\r\n                                self.SendMsg(\"Error to sign with Google\");\r\n                            }\r\n                        });\r\n                        self.EventTrigger(\"finish\");\r\n                    });\r\n                });\r\n            };\r\n\r\n            // If head is ok, add script\r\n            if (typeof head[0] !== \"undefined\") {\r\n                head[0].appendChild(s);\r\n            }\r\n        }\r\n        else if (social_network === \"linkedin\") {\r\n\r\n            // trigger start event\r\n            this.EventTrigger(\"start\");\r\n\r\n            // data for fo services\r\n            const data = {};\r\n            data.opt = action;\r\n            data.social = social_network;\r\n\r\n            const token =  this.DoPOST(\"https://foservices.prensalibre.com/auth/social-check\", data, (data) => {\r\n                if(typeof data.operation !== \"undefined\") {\r\n\r\n                    if (data.operation === \"start\") {\r\n                        // save social data and redirect\r\n                        self.SetSocialData(data, social_network);\r\n                        window.location.href = data.response;\r\n                    }\r\n                }\r\n                self.EventTrigger(\"finish\");\r\n            });\r\n        }\r\n        else{\r\n            this.SendMsg(\"Social '\"+social_network+\"' network not available\");\r\n        }\r\n    }\r\n\r\n    MakeLogin(user, password, keep_session, eventsOnGo) {\r\n\r\n        if(!user) user = \"\";\r\n        if(!password) password = \"\";\r\n        if(!keep_session) keep_session = false;\r\n        if(!eventsOnGo) eventsOnGo = {};\r\n\r\n        this.EventTrigger(\"start\");\r\n        this.execEventOnGo(\"start\", eventsOnGo);\r\n\r\n        this.DoPOST(this.primary_url + '/auth/login', {user: user, password: password, keep_session: keep_session}, (data) => {\r\n\r\n            if (typeof data.auth !== \"undefined\") {\r\n                if (data.auth === 1) {\r\n                    this.SetAuthToken(data.token);\r\n                    // Validate token for security\r\n                    this.CheckLogin(eventsOnGo);\r\n                }\r\n                else {\r\n                    this.EventTrigger(\"disconnect\");\r\n                    this.execEventOnGo(\"disconnect\", eventsOnGo);\r\n                    this.EventTrigger(\"finish\");\r\n                    this.execEventOnGo(\"finish\", eventsOnGo);\r\n                }\r\n            }\r\n            else{\r\n                this.EventTrigger(\"finish\");\r\n                this.execEventOnGo(\"finish\", eventsOnGo);\r\n            }\r\n        });\r\n    }\r\n\r\n    MakeLogout(eventsOnGo) {\r\n        const disconnect = this.UnsetAuthToken();\r\n        this.EventTrigger(\"disconnect\");\r\n        return disconnect;\r\n    }\r\n\r\n    MakeRegister(user, password, password_confirm, name, lastname, eventsOnGo) {\r\n\r\n        if(!user) user = \"\";\r\n        if(!password) password = \"\";\r\n        if(!password_confirm) password_confirm = \"\";\r\n        if(!name) name = \"\";\r\n        if(!lastname) lastname = \"\";\r\n        if(!eventsOnGo) eventsOnGo = {};\r\n\r\n        this.EventTrigger(\"start\");\r\n        this.execEventOnGo(\"start\", eventsOnGo);\r\n\r\n        const dataSend = {};\r\n        dataSend.user = user;\r\n        dataSend.password = password;\r\n        dataSend.password_confirm = password_confirm;\r\n        dataSend.name = name;\r\n        dataSend.lastname = lastname;\r\n        dataSend.recaptcha_token = this.recaptcha_token;\r\n\r\n        this.DoPOST(this.primary_url + '/auth/register', dataSend, (data) => {\r\n\r\n            if (typeof data.auth !== \"undefined\" && typeof data.token !== \"undefined\") {\r\n                if (data.auth === 1) {\r\n                    this.SetAuthToken(data.token);\r\n                    this.EventTrigger(\"register_success\");\r\n                    this.execEventOnGo(\"register_success\", eventsOnGo);\r\n                    // Check login again\r\n                    this.CheckLogin(eventsOnGo);\r\n                }\r\n                else {\r\n                    this.EventTrigger(\"register_fail\");\r\n                    this.execEventOnGo(\"register_fail\", eventsOnGo);\r\n                }\r\n            }\r\n            else{\r\n                this.EventTrigger(\"register_fail\");\r\n                this.execEventOnGo(\"register_fail\", eventsOnGo);\r\n            }\r\n            this.EventTrigger(\"finish\");\r\n            this.execEventOnGo(\"finish\", eventsOnGo);\r\n        }, eventsOnGo);\r\n    }\r\n\r\n    GetUserID() {\r\n        const token = this.parseJwt(this.FindAuthToken());\r\n        if(typeof token.sub !== \"undefined\") {\r\n            return token.sub;\r\n        }\r\n        else{\r\n            return 0;\r\n        }\r\n    }\r\n}","const Auth = require('./auth').default;\r\nmodule.exports = {\r\n  Auth: Auth\r\n};"],"sourceRoot":""}